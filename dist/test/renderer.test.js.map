{"version":3,"file":"renderer.test.js","sourceRoot":"","sources":["../../src/test/renderer.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { Application, ProjectReflection } from '..';\nimport * as FS from 'fs-extra';\nimport * as Path from 'path';\nimport Assert = require('assert');\n\nfunction getFileIndex(base, dir: string = '', results: string[] = []) {\n    const files = FS.readdirSync(Path.join(base, dir));\n    files.forEach(function(file) {\n        file = Path.join(dir, file);\n        if (FS.statSync(Path.join(base, file)).isDirectory()) {\n            getFileIndex(base, file, results);\n        } else {\n            results.push(file);\n        }\n    });\n\n    return results.sort();\n}\n\nfunction compareDirectories(a, b) {\n    const aFiles = getFileIndex(a);\n    const bFiles = getFileIndex(b);\n    Assert.deepEqual(aFiles, bFiles, `Generated files differ. between \"${ a }\" and \"${ b }\"`);\n\n    const gitHubRegExp = /https:\\/\\/github.com\\/[A-Za-z0-9\\-]+\\/typedoc\\/blob\\/[^\\/]*\\/examples/g;\n    aFiles.forEach(function (file) {\n        const aSrc = FS.readFileSync(Path.join(a, file), {encoding: 'utf-8'})\n            .replace('\\r', '')\n            .replace(gitHubRegExp, '%GITHUB%');\n        const bSrc = FS.readFileSync(Path.join(b, file), {encoding: 'utf-8'})\n            .replace('\\r', '')\n            .replace(gitHubRegExp, '%GITHUB%');\n\n        if (aSrc !== bSrc) {\n            const err: any = new Error(`File contents of \"${file}\" differ.`);\n            err.expected = aSrc;\n            err.actual = bSrc;\n            err.showDiff = true;\n            throw err;\n        }\n    });\n}\n\ndescribe('Renderer', function() {\n    const src = Path.join(__dirname, '..', '..', 'examples', 'basic', 'src');\n    const out = Path.join(__dirname, '..', 'tmp', 'test');\n    let app: Application, project: ProjectReflection | undefined;\n\n    before(function() {\n        FS.removeSync(out);\n    });\n\n    after(function() {\n        FS.removeSync(out);\n    });\n\n    it('constructs', function() {\n        app = new Application({\n            mode:   'Modules',\n            logger: 'console',\n            target: 'ES5',\n            readme: Path.join(src, '..', 'README.md'),\n            module: 'CommonJS',\n            gaSite: 'foo.com' // verify theme option without modifying output\n        });\n    });\n\n    it('converts basic example', function() {\n        this.timeout(0);\n        const input = app.expandInputFiles([src]);\n        project = app.convert(input);\n\n        Assert(app.logger.errorCount === 0, 'Application.convert returned errors');\n        Assert(project instanceof ProjectReflection, 'Application.convert did not return a reflection');\n    });\n\n    it('renders basic example', function() {\n        this.timeout(0);\n        const result = app.generateDocs(project!, out);\n        Assert(result === true, 'Application.generateDocs returned errors');\n\n        FS.removeSync(Path.join(out, 'assets'));\n        compareDirectories(Path.join(__dirname, 'renderer', 'specs'), out);\n    });\n});\n"]}