{"version":3,"file":"parameter.js","sourceRoot":"","sources":["../../../../src/lib/converter/factories/parameter.ts"],"names":[],"mappings":";;AAAA,iCAAiC;AAEjC,0DAA0H;AAE1H,4CAAyC;AACzC,8DAA4D;AAS5D,SAAgB,eAAe,CAAC,OAAgB,EAAE,IAA6B;IAC3E,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,YAAY,2BAAmB,CAAC,EAAE;QACjD,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;KACrD;IACD,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;IAEhC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;QACd,OAAO;KACV;IAED,MAAM,SAAS,GAAG,IAAI,2BAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,sBAAc,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;IACjG,OAAO,CAAC,kBAAkB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAC5C,OAAO,CAAC,SAAS,CAAC,SAAS,EAAE,GAAG,EAAE;QAC9B,IAAI,EAAE,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC7E,SAAS,CAAC,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACnE,SAAS,CAAC,IAAI,GAAG,mBAAmB,CAAC;SACxC;aAAM;YACH,SAAS,CAAC,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;SACvG;QAED,SAAS,CAAC,YAAY,GAAG,wCAAmB,CAAC,IAAI,CAAC,CAAC;QACnD,SAAS,CAAC,OAAO,CAAC,sBAAc,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjE,SAAS,CAAC,OAAO,CAAC,sBAAc,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC9D,SAAS,CAAC,OAAO,CAAC,sBAAc,CAAC,YAAY,EAAE,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;QAEzE,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE;YACvB,SAAS,CAAC,UAAU,GAAG,EAAE,CAAC;SAC7B;QACD,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,OAAO,CAAC,qBAAS,CAAC,sBAAsB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;IACnE,OAAO,SAAS,CAAC;AACrB,CAAC;AAjCD,0CAiCC","sourcesContent":["import * as ts from 'typescript';\n\nimport { ReflectionFlag, ReflectionKind, ParameterReflection, SignatureReflection } from '../../models/reflections/index';\nimport { Context } from '../context';\nimport { Converter } from '../converter';\nimport { convertDefaultValue } from '../convert-expression';\n\n/**\n * Create a parameter reflection for the given node.\n *\n * @param context  The context object describing the current state the converter is in.\n * @param node  The parameter node that should be reflected.\n * @returns The newly created parameter reflection.\n */\nexport function createParameter(context: Context, node: ts.ParameterDeclaration): ParameterReflection | undefined {\n    if (!(context.scope instanceof SignatureReflection)) {\n        throw new Error('Expected signature reflection.');\n    }\n    const signature = context.scope;\n\n    if (!node.symbol) {\n        return;\n    }\n\n    const parameter = new ParameterReflection(node.symbol.name, ReflectionKind.Parameter, signature);\n    context.registerReflection(parameter, node);\n    context.withScope(parameter, () => {\n        if (ts.isArrayBindingPattern(node.name) || ts.isObjectBindingPattern(node.name)) {\n            parameter.type = context.converter.convertType(context, node.name);\n            parameter.name = '__namedParameters';\n        } else {\n            parameter.type = context.converter.convertType(context, node.type, context.getTypeAtLocation(node));\n        }\n\n        parameter.defaultValue = convertDefaultValue(node);\n        parameter.setFlag(ReflectionFlag.Optional, !!node.questionToken);\n        parameter.setFlag(ReflectionFlag.Rest, !!node.dotDotDotToken);\n        parameter.setFlag(ReflectionFlag.DefaultValue, !!parameter.defaultValue);\n\n        if (!signature.parameters) {\n            signature.parameters = [];\n        }\n        signature.parameters.push(parameter);\n    });\n\n    context.trigger(Converter.EVENT_CREATE_PARAMETER, parameter, node);\n    return parameter;\n}\n"]}