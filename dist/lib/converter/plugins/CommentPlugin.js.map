{"version":3,"file":"CommentPlugin.js","sourceRoot":"","sources":["../../../../src/lib/converter/plugins/CommentPlugin.ts"],"names":[],"mappings":"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","sourcesContent":["import * as ts from 'typescript';\n\nimport { Comment, CommentTag } from '../../models/comments/index';\nimport { IntrinsicType } from '../../models/types/index';\nimport { Reflection, ReflectionFlag, ReflectionKind, TraverseProperty,\n    TypeParameterReflection, DeclarationReflection, ProjectReflection,\n    SignatureReflection, ParameterReflection } from '../../models/reflections/index';\nimport { Component, ConverterComponent } from '../components';\nimport { parseComment, getRawComment } from '../factories/comment';\nimport { Converter } from '../converter';\nimport { Context } from '../context';\n\n/**\n * Structure used by [[ContainerCommentHandler]] to store discovered module comments.\n */\ninterface ModuleComment {\n    /**\n     * The module reflection this comment is targeting.\n     */\n    reflection: Reflection;\n\n    /**\n     * The full text of the best matched comment.\n     */\n    fullText: string;\n\n    /**\n     * Has the full text been marked as being preferred?\n     */\n    isPreferred: boolean;\n}\n\n/**\n * A handler that parses javadoc comments and attaches [[Models.Comment]] instances to\n * the generated reflections.\n */\n@Component({name: 'comment'})\nexport class CommentPlugin extends ConverterComponent {\n    /**\n     * List of discovered module comments.\n     */\n    private comments: {[id: number]: ModuleComment};\n\n    /**\n     * List of hidden reflections.\n     */\n    private hidden: Reflection[];\n\n    /**\n     * Create a new CommentPlugin instance.\n     */\n    initialize() {\n        this.listenTo(this.owner, {\n            [Converter.EVENT_BEGIN]:                   this.onBegin,\n            [Converter.EVENT_CREATE_DECLARATION]:      this.onDeclaration,\n            [Converter.EVENT_CREATE_SIGNATURE]:        this.onDeclaration,\n            [Converter.EVENT_CREATE_TYPE_PARAMETER]:   this.onCreateTypeParameter,\n            [Converter.EVENT_FUNCTION_IMPLEMENTATION]: this.onFunctionImplementation,\n            [Converter.EVENT_RESOLVE_BEGIN]:           this.onBeginResolve,\n            [Converter.EVENT_RESOLVE]:                 this.onResolve\n        });\n    }\n\n    private storeModuleComment(comment: string, reflection: Reflection) {\n        const isPreferred = (comment.toLowerCase().indexOf('@preferred') !== -1);\n\n        if (this.comments[reflection.id]) {\n            const info = this.comments[reflection.id];\n            if (!isPreferred && (info.isPreferred || info.fullText.length > comment.length)) {\n                return;\n            }\n\n            info.fullText    = comment;\n            info.isPreferred = isPreferred;\n        } else {\n            this.comments[reflection.id] = {\n                reflection:  reflection,\n                fullText:    comment,\n                isPreferred: isPreferred\n            };\n        }\n    }\n\n    /**\n     * Apply all comment tag modifiers to the given reflection.\n     *\n     * @param reflection  The reflection the modifiers should be applied to.\n     * @param comment  The comment that should be searched for modifiers.\n     */\n    private applyModifiers(reflection: Reflection, comment: Comment) {\n        if (comment.hasTag('private')) {\n            reflection.setFlag(ReflectionFlag.Private);\n            CommentPlugin.removeTags(comment, 'private');\n        }\n\n        if (comment.hasTag('protected')) {\n            reflection.setFlag(ReflectionFlag.Protected);\n            CommentPlugin.removeTags(comment, 'protected');\n        }\n\n        if (comment.hasTag('public')) {\n            reflection.setFlag(ReflectionFlag.Public);\n            CommentPlugin.removeTags(comment, 'public');\n        }\n\n        if (comment.hasTag('event')) {\n            reflection.kind = ReflectionKind.Event;\n            // reflection.setFlag(ReflectionFlag.Event);\n            CommentPlugin.removeTags(comment, 'event');\n        }\n\n        if (comment.hasTag('hidden')) {\n            if (!this.hidden) {\n                this.hidden = [];\n            }\n            this.hidden.push(reflection);\n        }\n    }\n\n    /**\n     * Triggered when the converter begins converting a project.\n     *\n     * @param context  The context object describing the current state the converter is in.\n     */\n    private onBegin(context: Context) {\n        this.comments = {};\n    }\n\n    /**\n     * Triggered when the converter has created a type parameter reflection.\n     *\n     * @param context  The context object describing the current state the converter is in.\n     * @param reflection  The reflection that is currently processed.\n     * @param node  The node that is currently processed if available.\n     */\n    private onCreateTypeParameter(context: Context, reflection: TypeParameterReflection, node?: ts.Node) {\n        const comment = reflection.parent.comment;\n        if (comment) {\n            let tag = comment.getTag('typeparam', reflection.name);\n            if (!tag) {\n                tag = comment.getTag('param', `<${reflection.name}>`);\n            }\n            if (!tag) {\n                tag = comment.getTag('param', reflection.name);\n            }\n\n            if (tag) {\n                reflection.comment = new Comment(tag.text);\n                comment.tags.splice(comment.tags.indexOf(tag), 1);\n            }\n        }\n    }\n\n    /**\n     * Triggered when the converter has created a declaration or signature reflection.\n     *\n     * Invokes the comment parser.\n     *\n     * @param context  The context object describing the current state the converter is in.\n     * @param reflection  The reflection that is currently processed.\n     * @param node  The node that is currently processed if available.\n     */\n    private onDeclaration(context: Context, reflection: Reflection, node?: ts.Node) {\n        if (!node) {\n            return;\n        }\n        const rawComment = getRawComment(node);\n        if (!rawComment) {\n            return;\n        }\n\n        if (reflection.kindOf(ReflectionKind.FunctionOrMethod) || (reflection.kindOf(ReflectionKind.Event) && reflection['signatures'])) {\n            const comment = parseComment(rawComment, reflection.comment);\n            this.applyModifiers(reflection, comment);\n        } else if (reflection.kindOf(ReflectionKind.Module)) {\n            this.storeModuleComment(rawComment, reflection);\n        } else {\n            const comment = parseComment(rawComment, reflection.comment);\n            this.applyModifiers(reflection, comment);\n            reflection.comment = comment;\n        }\n    }\n\n    /**\n     * Triggered when the converter has found a function implementation.\n     *\n     * @param context  The context object describing the current state the converter is in.\n     * @param reflection  The reflection that is currently processed.\n     * @param node  The node that is currently processed if available.\n     */\n    private onFunctionImplementation(context: Context, reflection: Reflection, node?: ts.Node) {\n        if (!node) {\n            return;\n        }\n\n        const comment = getRawComment(node);\n        if (comment) {\n            reflection.comment = parseComment(comment, reflection.comment);\n        }\n    }\n\n    /**\n     * Triggered when the converter begins resolving a project.\n     *\n     * @param context  The context object describing the current state the converter is in.\n     */\n    private onBeginResolve(context: Context) {\n        for (let id in this.comments) {\n            if (!this.comments.hasOwnProperty(id)) {\n                continue;\n            }\n\n            const info    = this.comments[id];\n            const comment = parseComment(info.fullText);\n            CommentPlugin.removeTags(comment, 'preferred');\n\n            this.applyModifiers(info.reflection, comment);\n            info.reflection.comment = comment;\n        }\n\n        if (this.hidden) {\n            const project = context.project;\n            this.hidden.forEach((reflection) => {\n                CommentPlugin.removeReflection(project, reflection);\n            });\n        }\n    }\n\n    /**\n     * Triggered when the converter resolves a reflection.\n     *\n     * Cleans up comment tags related to signatures like @param or @return\n     * and moves their data to the corresponding parameter reflections.\n     *\n     * This hook also copies over the comment of function implementations to their\n     * signatures.\n     *\n     * @param context  The context object describing the current state the converter is in.\n     * @param reflection  The reflection that is currently resolved.\n     */\n    private onResolve(context: Context, reflection: DeclarationReflection) {\n        if (!(reflection instanceof DeclarationReflection)) {\n            return;\n        }\n\n        const signatures = reflection.getAllSignatures();\n        if (signatures.length) {\n            const comment = reflection.comment;\n            if (comment && comment.hasTag('returns')) {\n                comment.returns = comment.getTag('returns').text;\n                CommentPlugin.removeTags(comment, 'returns');\n            }\n\n            signatures.forEach((signature) => {\n                let childComment = signature.comment;\n                if (childComment && childComment.hasTag('returns')) {\n                    childComment.returns = childComment.getTag('returns').text;\n                    CommentPlugin.removeTags(childComment, 'returns');\n                }\n\n                if (comment) {\n                    if (!childComment) {\n                        childComment = signature.comment = new Comment();\n                    }\n\n                    childComment.shortText = childComment.shortText || comment.shortText;\n                    childComment.text      = childComment.text      || comment.text;\n                    childComment.returns   = childComment.returns   || comment.returns;\n                }\n\n                if (signature.parameters) {\n                    signature.parameters.forEach((parameter) => {\n                        let tag: CommentTag;\n                        if (childComment) {\n                            tag = childComment.getTag('param', parameter.name);\n                        }\n                        if (comment && !tag) {\n                            tag = comment.getTag('param', parameter.name);\n                        }\n                        if (tag) {\n                            parameter.comment = new Comment(tag.text);\n                        }\n                    });\n                }\n\n                CommentPlugin.removeTags(childComment, 'param');\n            });\n\n            CommentPlugin.removeTags(comment, 'param');\n        }\n    }\n\n    /**\n     * Remove all tags with the given name from the given comment instance.\n     *\n     * @param comment  The comment that should be modified.\n     * @param tagName  The name of the that that should be removed.\n     */\n    static removeTags(comment: Comment, tagName: string) {\n        if (!comment || !comment.tags) {\n            return;\n        }\n\n        let i = 0, c = comment.tags.length;\n        while (i < c) {\n            if (comment.tags[i].tagName === tagName) {\n                comment.tags.splice(i, 1);\n                c--;\n            } else {\n                i++;\n            }\n        }\n    }\n\n    /**\n     * Remove the given reflection from the project.\n     */\n    static removeReflection(project: ProjectReflection, reflection: Reflection) {\n        reflection.traverse((child) => CommentPlugin.removeReflection(project, child));\n\n        const parent = <DeclarationReflection> reflection.parent;\n        parent.traverse((child: Reflection, property: TraverseProperty) => {\n            if (child === reflection) {\n                switch (property) {\n                    case TraverseProperty.Children:\n                        if (parent.children) {\n                            const index = parent.children.indexOf(<DeclarationReflection> reflection);\n                            if (index !== -1) {\n                                parent.children.splice(index, 1);\n                            }\n                        }\n                        break;\n                    case TraverseProperty.GetSignature:\n                        delete parent.getSignature;\n                        break;\n                    case TraverseProperty.IndexSignature:\n                        delete parent.indexSignature;\n                        break;\n                    case TraverseProperty.Parameters:\n                        if ((<SignatureReflection> reflection.parent).parameters) {\n                            const index = (<SignatureReflection> reflection.parent).parameters.indexOf(<ParameterReflection> reflection);\n                            if (index !== -1) {\n                                (<SignatureReflection> reflection.parent).parameters.splice(index, 1);\n                            }\n                        }\n                        break;\n                    case TraverseProperty.SetSignature:\n                        delete parent.setSignature;\n                        break;\n                    case TraverseProperty.Signatures:\n                        if (parent.signatures) {\n                            const index = parent.signatures.indexOf(<SignatureReflection> reflection);\n                            if (index !== -1) {\n                                parent.signatures.splice(index, 1);\n                            }\n                        }\n                        break;\n                    case TraverseProperty.TypeLiteral:\n                        parent.type = new IntrinsicType('Object');\n                        break;\n                    case TraverseProperty.TypeParameter:\n                        if (parent.typeParameters) {\n                            const index = parent.typeParameters.indexOf(<TypeParameterReflection> reflection);\n                            if (index !== -1) {\n                                parent.typeParameters.splice(index, 1);\n                            }\n                        }\n                        break;\n                }\n            }\n        });\n\n        let id = reflection.id;\n        delete project.reflections[id];\n\n        for (let key in project.symbolMapping) {\n            if (project.symbolMapping.hasOwnProperty(key) && project.symbolMapping[key] === id) {\n                delete project.symbolMapping[key];\n            }\n        }\n    }\n}\n"]}