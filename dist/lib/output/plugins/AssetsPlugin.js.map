{"version":3,"file":"AssetsPlugin.js","sourceRoot":"","sources":["../../../../src/lib/output/plugins/AssetsPlugin.ts"],"names":[],"mappings":";;;;;;;;AAAA,6BAA6B;AAC7B,+BAA+B;AAE/B,8CAA6D;AAC7D,sCAA0C;AAC1C,0CAAuC;AAOvC,IAAa,YAAY,GAAzB,MAAa,YAAa,SAAQ,8BAAiB;IADnD;;QAKI,sBAAiB,GAAG,IAAI,CAAC;IA+B7B,CAAC;IA1BG,UAAU;QACN,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE;YACtB,CAAC,sBAAa,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,eAAe;SAC9C,CAAC,CAAC;IACP,CAAC;IAOO,eAAe,CAAC,KAAoB;QACxC,IAAI,WAAW,GAAuB,IAAI,CAAC,IAAI,CAAC,mBAAQ,CAAC,eAAe,EAAE,EAAE,QAAQ,CAAC,CAAC;QACtF,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;QAEtD,IAAI,IAAI,CAAC,iBAAiB,EAAE;YACxB,EAAE,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;SAChC;aAAM;YACH,WAAW,GAAG,SAAS,CAAC;SAC3B;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC7D,IAAI,IAAI,KAAK,WAAW,IAAI,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YAC7C,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;SACzB;IACL,CAAC;CACJ,CAAA;AAnCY,YAAY;IADxB,sBAAS,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAC,CAAC;GACf,YAAY,CAmCxB;AAnCY,oCAAY","sourcesContent":["import * as Path from 'path';\nimport * as FS from 'fs-extra';\n\nimport { Component, RendererComponent } from '../components';\nimport { RendererEvent } from '../events';\nimport { Renderer } from '../renderer';\n\n/**\n * A plugin that copies the subdirectory ´assets´ from the current themes\n * source folder to the output directory.\n */\n@Component({name: 'assets'})\nexport class AssetsPlugin extends RendererComponent {\n    /**\n     * Should the default assets always be copied to the output directory?\n     */\n    copyDefaultAssets = true;\n\n    /**\n     * Create a new AssetsPlugin instance.\n     */\n    initialize() {\n        this.listenTo(this.owner, {\n            [RendererEvent.BEGIN]: this.onRendererBegin\n        });\n    }\n\n    /**\n     * Triggered before the renderer starts rendering a project.\n     *\n     * @param event  An event object describing the current render operation.\n     */\n    private onRendererBegin(event: RendererEvent) {\n        let fromDefault: string | undefined = Path.join(Renderer.getDefaultTheme(), 'assets');\n        const to = Path.join(event.outputDirectory, 'assets');\n\n        if (this.copyDefaultAssets) {\n            FS.copySync(fromDefault, to);\n        } else {\n            fromDefault = undefined;\n        }\n\n        const from = Path.join(this.owner.theme!.basePath, 'assets');\n        if (from !== fromDefault && FS.existsSync(from)) {\n            FS.copySync(from, to);\n        }\n    }\n}\n"]}