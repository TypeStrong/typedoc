{"version":3,"file":"typescript.js","sourceRoot":"","sources":["../../../../../src/lib/utils/options/sources/typescript.ts"],"names":[],"mappings":"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","sourcesContent":["import * as ts from 'typescript';\nimport * as _ts from '../../../ts-internal';\n\nimport { Component } from '../../component';\nimport { OptionsComponent } from '../options';\nimport { DeclarationOption, ParameterScope, ParameterType, ParameterHint } from '../declaration';\n\n@Component({name: 'options:typescript'})\nexport class TypeScriptSource extends OptionsComponent {\n    private declarations: DeclarationOption[];\n\n    /**\n     * A list of all TypeScript parameters that should be ignored.\n     */\n    static IGNORED: string[] = [\n        'out', 'version', 'help',\n        'watch', 'declaration', 'declarationDir', 'mapRoot',\n        'sourceMap', 'inlineSources', 'removeComments'\n    ];\n\n    initialize() {\n        const ignored = TypeScriptSource.IGNORED;\n        this.declarations = [];\n\n        for (let declaration of _ts.optionDeclarations) {\n            if (ignored.indexOf(declaration.name) === -1) {\n                this.addTSOption(declaration);\n            }\n        }\n    }\n\n    /**\n     * Return all option declarations emitted by this component.\n     */\n    getOptionDeclarations(): DeclarationOption[] {\n        return this.declarations;\n    }\n\n    private addTSOption(option: _ts.CommandLineOption) {\n        const param: DeclarationOption = {\n            name:      option.name,\n            short:     option.shortName,\n            help:      option.description ? option.description.key : null,\n            scope:     ParameterScope.TypeScript,\n            component: this.componentName\n        };\n\n        switch (option.type) {\n            case 'number':\n                param.type = ParameterType.Number;\n                break;\n            case 'boolean':\n                param.type = ParameterType.Boolean;\n                break;\n            case 'string':\n                param.type = ParameterType.String;\n                break;\n            case 'list':\n                param.type = ParameterType.Array;\n                break;\n            default:\n                param.type = ParameterType.Map;\n                param.map = option.type;\n                if (option['error']) {\n                    const error = _ts.createCompilerDiagnostic(option['error']);\n                    param.mapError = ts.flattenDiagnosticMessageText(error.messageText, ', ');\n                }\n        }\n\n        switch (option.paramType) {\n            case _ts.Diagnostics.FILE:\n                param.hint = ParameterHint.File;\n                break;\n            case _ts.Diagnostics.DIRECTORY:\n                param.hint = ParameterHint.Directory;\n                break;\n        }\n\n        this.declarations.push(param);\n    }\n}\n"]}